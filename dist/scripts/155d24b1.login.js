var LoginModule=angular.module("login",["ones.config"]);LoginModule.controller("LoginCtl",["$scope","$http","$rootScope","ones.config",function(a,b,c,d){a.error={isError:!1,msg:null},a.error.message=null,a.loginInfo={username:"administrator",password:"123123",remember:!1},a.doLogin=function(){return a.LoginForm.$invalid?!1:(c.sessionHash=c.sessionHash||null,void b.post(d.BSU+"passport/userLogin",a.loginInfo).success(function(b){b.error?(a.error.isError=!0,a.error.msg=b.msg):b.sessionHash&&(window.location.href="app.html?hash="+b.sessionHash)}).error(function(){a.error.isError=!0,a.error.msg="Server Error."}))},a.doKeyDown=function(b){"13"==b.keyCode&&a.doLogin()},a.doRetrivePwd=function(){}}]),LoginModule.run(["$http",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"],a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",a.defaults.transformRequest=function(a){return angular.isObject(a)&&"[object File]"!==String(a)?jQuery.param(a):a}}]);